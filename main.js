(()=>{"use strict";const e=[];class t{constructor(e){this.title=e,this.tasks=[]}addTask(e){this.tasks.push(e)}static createNewProject(){const c=document.getElementById("project-title").value,d=new t(c);e.push(d),console.log(e)}static getSelectedProject(e){const t=parseInt(e.getAttribute("data-index"));return console.log(t),t}}class c{constructor(e,t,c,d,n){this.title=e,this.description=t,this.dueDate=c,this.priority=d}static createNewTodo(t){const d=document.getElementById("title").value,n=document.getElementById("description").value,o=document.getElementById("dueDate").value;let s;const a=document.getElementsByName("priority");for(let e=0;e<a.length;e++)if(a[e].checked){s=a[e].value;break}const l=e[t],i=new c(d,n,o,s);return l.tasks.push(i),console.log("new task created: ",i),console.log(l),i}}const d=(()=>{const d=document.querySelector(".modal"),n=document.querySelector(".overlay"),o=document.querySelector(".project-modal");function s(){d.classList.add("hidden"),n.classList.add("hidden")}function a(){d.classList.remove("hidden"),n.classList.remove("hidden")}function l(){o.classList.add("hidden"),n.classList.add("hidden")}function i(){o.classList.remove("hidden"),n.classList.remove("hidden")}function r(){document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("dueDate").value="";const e=document.getElementsByName("priority");for(let t=0;t<e.length;t++)e[t].checked=!1}function u(){document.getElementById("project-title").value=""}function m(){document.querySelector(".add").classList.remove("hidden")}function p(){document.querySelector(".add").classList.add("hidden")}function h(t){const c=document.querySelector(".project-name");if(c.textContent="",void 0!==t){const d=e[t];c.textContent=d.title+" ("+d.tasks.length+")"}else c.textContent="ALL"}function L(c,d){const n=document.querySelector(".submit"),o=document.querySelector(".projects-container"),s=document.createElement("div"),a=document.createElement("p"),l=document.createElement("button");s.classList.add("project"),s.setAttribute("data-index",d),o.appendChild(s),a.classList.add("project-title"),a.textContent=c.title,s.appendChild(a),l.classList.add("project-delete"),l.innerHTML='<img src="./images/trash-can-outline.svg" alt="delete">',s.appendChild(l),s.addEventListener("click",(()=>{const e=t.getSelectedProject(s);console.log("selected project: ",e),n.dataset.selectedProjectIndex=e,document.querySelectorAll(".project").forEach((e=>e.classList.remove("selected"))),document.querySelector(".show-all").classList.remove("selected"),s.classList.add("selected"),v(e),h(e),m()})),l.addEventListener("click",(t=>{t.stopPropagation();const c=parseInt(s.getAttribute("data-index"));e.splice(c,1),p(),y(),v(),C()}))}function E(t,c){const d=document.querySelector(".todos-container"),n=document.createElement("div"),o=document.createElement("p"),s=document.createElement("p"),a=document.createElement("p"),l=document.createElement("input"),i=document.createElement("button");switch(n.classList.add("todo"),n.setAttribute("data-index",c),d.appendChild(n),l.classList.add("check-btn"),l.type="checkbox",n.appendChild(l),o.classList.add("todo-title"),o.textContent=t.title,n.appendChild(o),s.classList.add("todo-desc"),s.textContent=t.description,n.appendChild(s),a.classList.add("todo-due-date"),a.textContent=t.dueDate,n.appendChild(a),t.priority){case"Urgent":l.classList.add("prio-urgent");break;case"Important":l.classList.add("prio-important");break;case"Can wait":l.classList.add("prio-canwait")}i.classList.add("todo-delete"),i.innerHTML='<img src="./images/trash-can-outline.svg" alt="delete">',n.appendChild(i),i.addEventListener("click",(t=>{t.stopPropagation();const c=document.querySelector(".submit"),d=parseInt(n.getAttribute("data-index")),o=parseInt(c.dataset.selectedProjectIndex);e[o].tasks.splice(d,1),console.log("should delete this"),C(),y(),v(o),h(o)})),l.addEventListener("change",(()=>{l.checked?n.classList.add("completed"):n.classList.remove("completed")}))}function y(){document.querySelector(".projects-container").innerHTML="",e.forEach(((e,t)=>{L(e,t)}))}function v(t=null){document.querySelector(".todos-container").innerHTML="",null!==t?e[t].tasks.forEach(((e,t)=>{E(e,t)})):e.forEach(((e,t)=>{e.tasks.forEach(((e,t)=>{E(e,t)}))}))}function g(e){return{title:e.title,tasks:e.tasks.map((e=>({title:e.title,description:e.description,dueDate:e.dueDate,priority:e.priority})))}}function C(){const t=e.map(g);localStorage.setItem("projects",JSON.stringify(t))}return{handleClickEvents:function(){const e=document.querySelector(".add"),d=document.querySelector(".close"),n=document.querySelector(".submit"),o=document.querySelector(".cancel"),m=document.querySelector(".add-project"),L=document.querySelector(".show-all"),E=document.querySelector(".project-submit"),g=document.querySelector(".project-cancel"),j=document.querySelector(".project-close");e.addEventListener("click",(()=>{r(),a()})),d.addEventListener("click",(()=>{s()})),n.addEventListener("click",(()=>{const e=n.dataset.selectedProjectIndex;c.createNewTodo(e),s(),v(e),h(e),C()})),o.addEventListener("click",(()=>{s()})),m.addEventListener("click",(()=>{i()})),E.addEventListener("click",(()=>{t.createNewProject(),y(),l(),u(),C()})),g.addEventListener("click",(()=>{l(),u()})),j.addEventListener("click",(()=>{l()})),L.addEventListener("click",(()=>{v(),p(),document.querySelectorAll(".project").forEach((e=>e.classList.remove("selected"))),L.classList.add("selected"),h()}))},createTodoCard:E,displayTodoCards:v,createProject:L,displayProjects:y,hideModal:s,showModal:a,clearForm:r,showAddButton:m,hideAddButton:p,updateProjectNameDisplay:h,showProjectModal:i,hideProjectModal:l,clearProjectForm:u,saveToLocalStorage:C,loadFromLocalStorage:function(){const d=JSON.parse(localStorage.getItem("projects"))||[];e.length=0,d.forEach((d=>{const n=function(e){const d=new t(e.title);return e.tasks.forEach((e=>{d.addTask(new c(e.title,e.description,e.dueDate,e.priority))})),d}(d);e.push(n)}))}}})();document.addEventListener("DOMContentLoaded",(()=>{(function(){const e=document.querySelector("body"),t=document.createElement("header");e.appendChild(t);const c=document.createElement("img");c.src="./images/check-all.svg",c.classList.add("logo"),t.appendChild(c);const d=document.createElement("h1");d.textContent="ToDo",t.appendChild(d);const n=document.createElement("div");n.classList.add("container"),e.appendChild(n);const o=document.createElement("div");o.classList.add("sidebar"),n.appendChild(o);const s=document.createElement("button");s.classList.add("show-all"),s.classList.add("selected"),s.innerText="All",o.appendChild(s);const a=document.createElement("div");a.classList.add("projects-header"),o.appendChild(a);const l=document.createElement("h2");l.textContent="Projects",a.appendChild(l);const i=document.createElement("button");i.classList.add("add-project"),i.innerText="+",a.appendChild(i);const r=document.createElement("div");r.classList.add("projects-container"),o.appendChild(r);const u=document.createElement("div");u.classList.add("content"),n.appendChild(u);const m=document.createElement("p");m.classList.add("project-name"),m.innerText="ALL",u.appendChild(m);const p=document.createElement("button");p.classList.add("add"),p.classList.add("hidden"),p.innerText="+",u.appendChild(p);const h=document.createElement("div");h.classList.add("todos-container"),u.appendChild(h)})(),d.loadFromLocalStorage(),d.handleClickEvents(),d.displayTodoCards(),d.displayProjects()}))})();